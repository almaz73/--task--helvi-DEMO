import R from 'ramda'
import axios from 'axios'
import {countries} from 'api/countries'

export const changeCombo = async (value, type, count) => {
   type = type || 'fio'
   count = count || 4
   return axios.post (
      'https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/' + type, // fio, address, email
      {'query': value, 'count': count},
      {
         headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
            'Authorization': 'Token 6bd2b189e14cf0ed418e989f0efe36ae78a7e607'
         },
         // `withCredentials` indicates whether or not cross-site Access-Control requests
         // should be made using credentials
         withCredentials: false
      }
   )
      .then (function (response) {
         return response
      })
      .catch (function (error) {
         return error
      });
}

export const changeCountryApi = async (value) => {
   const isEven = name => name.toUpperCase ().indexOf (value.toUpperCase ()) > -1
   const result = R.filter (isEven, countries)
   const slice = R.slice (0, 15, result)
   return new Promise (resolve => {
      resolve (slice)
   })
}